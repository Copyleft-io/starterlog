"use strict";var app=angular.module("starterlog",["firebase","ui.bootstrap","ui.router","ngTable","textAngular"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("login",{url:"/login",controller:"AuthCtrl as authCtrl",templateUrl:"auth/login.html",resolve:{requireNoAuth:["$state","Auth",function(a,b){return b.$requireAuth().then(function(b){a.go("home")},function(a){})}]}}).state("register",{url:"/register",controller:"AuthCtrl as authCtrl",templateUrl:"auth/register.html",resolve:{requireNoAuth:["$state","Auth",function(a,b){return b.$requireAuth().then(function(b){a.go("home")},function(a){})}]}}).state("profile",{url:"/profile",controller:"ProfileCtrl as profileCtrl",templateUrl:"users/profile.html",resolve:{auth:["$state","Users","Auth",function(a,b,c){return c.$requireAuth()["catch"](function(){a.go("home")})}],profile:["Users","Auth",function(a,b){return b.$requireAuth().then(function(b){return a.getProfile(b.uid).$loaded()})}]}}).state("blog-posts",{url:"/blog/posts",controller:"PostsCtrl as postsCtrl",templateUrl:"blog/index.html",resolve:{alarms:["Posts",function(a){return a()}],auth:["$state","Users","Auth",function(a,b,c){return c.$requireAuth()["catch"](function(){a.go("home")})}]}}).state("blog-post-create",{url:"/blog/posts/create",templateUrl:"blog/create.html",controller:"PostsCtrl as postsCtrl",resolve:{auth:["$state","Users","Auth",function(a,b,c){return c.$requireAuth()["catch"](function(){a.go("home")})}]}}).state("blog-post-view",{url:"/blog/posts/view/{postId}",templateUrl:"blog/view.html",controller:"PostsCtrl as postsCtrl"}).state("blog-post-preview",{url:"/blog/posts/preview/{postId}",templateUrl:"blog/preview.html",controller:"PostsCtrl as postsCtrl"}).state("posts/edit",{url:"/blog/posts/edit/{postId}",templateUrl:"blog/edit.html",controller:"PostsCtrl as postsCtrl"}).state("pages-about",{url:"/pages/about",templateUrl:"pages/about.html"}).state("pages-blog-home",{url:"/pages/blog-home",templateUrl:"pages/blog-home.html"}).state("pages-blog-post",{url:"/pages/blog-post",templateUrl:"pages/blog-post.html"}).state("pages-twitter-bootstrap-components",{url:"/pages/twitter-bootstrap-components",templateUrl:"pages/twitter-bootstrap-components.html"}).state("pages-angular-bootstrap-directives",{url:"/pages/angular-bootstrap-directives",templateUrl:"pages/angular-bootstrap-directives.html"}).state("pages-cover",{url:"/pages/cover",templateUrl:"pages/cover.html"}).state("pages-1-column-portfolio",{url:"/pages/1-column-portfolio",templateUrl:"pages/1-column-portfolio.html"}).state("pages-2-column-portfolio",{url:"/pages/2-column-portfolio",templateUrl:"pages/2-column-portfolio.html"}).state("pages-3-column-portfolio",{url:"/pages/3-column-portfolio",templateUrl:"pages/3-column-portfolio.html"}).state("pages-4-column-portfolio",{url:"/pages/4-column-portfolio",templateUrl:"pages/4-column-portfolio.html"}).state("pages-landing",{url:"/pages/landing",templateUrl:"pages/landing.html"}).state("pages-signin",{url:"/pages/signin",templateUrl:"pages/signin.html"}).state("pages-signup",{url:"/pages/signup",templateUrl:"pages/signup.html"}).state("pages-portfolio-item",{url:"/pages/portfolio-item",templateUrl:"pages/portfolio-item.html"}).state("pages-product",{url:"/pages/product",templateUrl:"pages/product.html"}).state("pages-thumbnail-gallery",{url:"/pages/thumbnail-gallery",templateUrl:"pages/thumbnail-gallery.html"}).state("pages-welcome",{url:"/pages/welcome",templateUrl:"pages/welcome.html"}).state("patterns-configuration",{url:"/patterns/configuration",templateUrl:"patterns/configuration.html"}).state("patterns-contoller",{url:"/patterns/controller",templateUrl:"patterns/controller.html"}).state("patterns-factory",{url:"/patterns/factory",templateUrl:"patterns/factory.html"}).state("get-started",{url:"/get-started",templateUrl:"static/get-started.html"}).state("home",{url:"/",templateUrl:"static/home.html"}),b.otherwise("/")}]).constant("FIREBASE_URL","https://starterlog-org.firebaseio.com/");console.log("--> starterlog/app/app.js loaded"),app.factory("Auth",["$firebaseAuth","FIREBASE_URL",function(a,b){var c=new Firebase(b),d=a(c);return d}]),console.log("--> starterlog/app/auth/auth.service.js loaded"),app.controller("AuthCtrl",["Auth","$state",function(a,b){var c=this;c.user={email:"",password:""},c.login=function(){a.$authWithPassword(c.user).then(function(a){b.go("home")},function(a){c.error=a})},c.register=function(){a.$createUser(c.user).then(function(a){c.login()},function(a){c.error=a})}}]),console.log("--> starterlog/app/auth/auth.controller.js loaded"),app.factory("Users",["$firebaseArray","$firebaseObject","FIREBASE_URL",function(a,b,c){var d=new Firebase(c+"users"),e=new Firebase(c+".info/connected"),f=a(d),g={getProfile:function(a){return b(d.child(a))},getDisplayName:function(a){return f.$getRecord(a).displayName},getGravatar:function(a){return"//www.gravatar.com/avatar/"+f.$getRecord(a).emailHash},setOnline:function(c){var f=b(e),g=a(d.child(c+"/online"));f.$watch(function(){f.$value===!0&&g.$add(!0).then(function(a){a.onDisconnect().remove()})})},all:f};return g}]),console.log("--> starterlog/app/users/users.service.js loaded"),app.controller("ProfileCtrl",["$state","Auth","auth","profile",function(a,b,c,d){var e=this;e.profile=d,e.updateProfile=function(){e.profile.email=c.password.email,e.profile.$save().then(function(){a.go("profile")})},e.logout=function(){e.profile.online=null,e.profile.$save().then(function(){b.$unauth(),a.go("home")})}}]),console.log("--> starterlog/app/users.profile.js loaded"),app.factory("Posts",["FIREBASE_URL","$firebaseArray",function(a,b){return function(){var c=new Firebase(a+"posts");return b(c)}}]),console.log("--> starterlog/app/blog/posts.service.js loaded"),app.controller("PostsCtrl",["$state","$scope","FIREBASE_URL","$firebaseObject","$firebaseArray","$stateParams","ngTableParams","$filter","Posts",function(a,b,c,d,e,f,g,h,i){b.posts=i(),b.create=function(c){c.createdAt=(new Date).toString(),b.posts.$add(c).then(function(){console.log("Blog Post Created"),a.go("blog-posts")})["catch"](function(a){console.log(a)})},b.getPost=function(){var a=new Firebase(c+"posts");b.post=d(a.child(f.postId))},b.update=function(){b.post.$save().then(function(){console.log("Blog Post Updated"),a.go("blog-posts")})["catch"](function(a){console.log(a)})},b["delete"]=function(c){b.posts.$remove(c).then(function(){console.log("Post Deleted"),a.go("blog-posts")})["catch"](function(a){console.log(a)})},b.posts.$loaded().then(function(a){console.log(a.length);var c=a;b.tablePosts=new g({page:1,count:10,sorting:{title:"asc"}},{total:c.length,getData:function(a,b){var d=b.sorting()?h("filter")(c,b.filter()):c;a.resolve(d.slice((b.page()-1)*b.count(),b.page()*b.count()))}})});var j=new Firebase(c+"posts"),k=e(j);k.$watch(function(a){console.log(a),b.posts.$loaded().then(function(){b.tablePosts.reload()})})}]),console.log("--> starterlog/app/blog/posts.controller.js loaded");